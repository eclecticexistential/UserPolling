@{
    ViewBag.Title = "Home Page";
}

<div class="jumbotron text-center">
    <h1>Your Opinion Matters</h1>
</div>

<div class="row">
    <h1 class="text-center">Top Questions of @DateTime.Now.ToString("MM-dd-yyyy")</h1>
    @using (var questions = new VoteContext())
                {
                    var listOfQuestions = questions.AskedQuestions.ToList();
                    int counter = 0;
                    foreach (var question in listOfQuestions)
                    {
                        var user = User.Identity.Name;
                        var asked = questions.UserVotes.SingleOrDefault(x => x.UserId == user && x.QuestionsId == question.Id);
                        if (question.Votes > 50 && counter < 11)
                        {
    <div class="col-md-4">
        <h3>@question.Question</h3>
        <p>Total Votes: @question.Votes</p>
        <p>Yes: @question.For</p>
        <p>No: @question.Against</p>
        @if (asked == null)
            {
                using (Html.BeginForm())
                {
                    var questNum = question.Id;
                    @Html.Hidden("questNum", questNum);
        <button type="submit" class="btn btn-success" value=0 name="answer">Yes</button>
        <button type="submit" class="btn btn-warning" value=1 name="answer">No</button>
            }
        }
        else
        {
            var vote = "";
            if (asked.Vote == 0)
            { vote = "Yes"; }
            else { vote = "No"; }
    <p>
        You voted: @vote
    </p>
}
    </div>
            }
            counter++;
        }
        
}
</div>